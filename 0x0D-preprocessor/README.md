working on macros and #def functions
